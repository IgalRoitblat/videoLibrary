<!DOCTYPE html>
<html>
<head>
	<title>Main Page</title>
	<link rel="stylesheet" type="text/css" href="../Style/default_style.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200" rel="stylesheet">
</head>
<body>
	<header>
		<img class="logo" src="data:image/png;base64,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" alt="logo">
		<nav>
			<a class="nav-link" href="/">Home</a>
		</nav>
	</header>
	<main>
		<div class="dashboard_body">
		<nav>
			<h4>Navigation</h4>
			<ul class="collection">
				<li class="collection-item"><a class="collection-item-link" href="/">
					<i class="material-icons">ondemand_video</i>
					<span>Videos</span>
				</a></li>
			</ul>
		</nav>
		<ul class="item_breakdown">
			<div class="content_nav">
				<h2>
					Videos
				</h2>
				<form>
					<input type="search" name="query" placeholder="start typing to search">
				</form>

			</div>
			<div class="clip-list">
				
			</div>
		</ul>		
			<div class="main_content">
				<div class="content_nav">
				</div>	
				<div class="video_container">
					
				</div>	
				<div class="personal_info">
				</div>
			</div>
		</div>
	</main>
	<footer>
		
	</footer>
</body>
<script type="text/javascript" src="jquery-3.3.1.min.js"></script>
<script type="text/javascript">
	var input = $("input");
	var query = "";

	showClips();
	
	$("form").on("submit", function(e) {
		e.preventDefault();
	});

	input.keyup(function() {
		removeClips();
		showClips(input[0].value);
	});

	input.on("search", function(e) {
		removeClips();
		showClips(input[0].value);
	});

	input.keydown(function(e) {
		if(e.keyCode == 8) {
			removeClips();
			showClips(input[0].value);
		}
	});

	function showClips(query) {
		$.post("/show-clips", {query}, function(data) {
			console.log(query);
			for (var i = 0; i < data.clips.length; i++) {
				$("<li>", {'data-clipid': data.clips[i].id}).text(data.clips[i].title).appendTo(".clip-list").click(function(e) {
					console.log($(e.target).text());
					console.log(showClip(e.target.dataset.clipid));
				});
			}
		});
	}

	function showClip(id) {
		$.get("/show-clip/" + id, function(data) {
			removeClip();
			console.log(data);
			$(".main_content").find(".content_nav").append($("<h2>").text(data.clip.title));
			$(".main_content").find(".video_container").append($("<video>", {src: ".." + data.clip.src, autoplay: "autoplay", controls: "controls"}))[0];
			$(".personal_info").append($("<h3>").text("Comments")).append($("<span>").text(data.clip.comments));
		});
	}

	function removeClips() {
		$(".clip-list").empty();
	}

	function removeClip() {
		$(".main_content").find(".content_nav").empty();
		$(".main_content").find(".personal_info").empty();
		$(".main_content").find(".video_container").empty();	
	}

</script>
</html>